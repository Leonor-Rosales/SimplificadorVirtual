{% extends "base.html" %}

{% block title %}Inicio - Simplificador Booleano{% endblock %}

{% block content %}
<h1 class="mb-4">Simplificador de Funciones Booleanas</h1>
<p class="lead">Ingresa una función booleana y observa cómo se simplifica paso a paso.</p>

<div class="card shadow-sm">
  <div class="card-body">
    <form method="post" class="row g-3">
      <div class="col-md-9">
        <input type="text" name="expresion" class="form-control" placeholder="Ejemplo: (A + B') * C + 0" required>
      </div>
      <div class="col-md-3">
        <button type="submit" class="btn btn-primary w-100 btn-lg">Simplificar</button>
      </div>
    </form>

    {% if subs_requerida %}
      <hr>
      <div class="alert alert-warning mt-2">
        <strong>Suscripción requerida:</strong> {{ mensaje_subs }}
      </div>
    {% endif %}

    {% if funcion_original %}
      <hr>
      <div class="alert alert-info">
        <strong>Función ingresada:</strong> <code>{{ funcion_original }}</code>
      </div>
    {% endif %}

    {% if pasos_detallados and not subs_requerida %}
      <h5 class="mt-3">Pasos de simplificación:</h5>
      <ol class="list-group list-group-numbered">
        {% for p in pasos_detallados %}
          <li class="list-group-item">
            Paso {{ loop.index }}: {{ p.ley }} → {{ p.despues }}
          </li>
        {% endfor %}
      </ol>
    {% endif %}

    {% if resultado and not subs_requerida %}
      <hr>
      <h4>Respuesta final:</h4>
      <div class="alert alert-success fs-5"><strong>{{ resultado }}</strong></div>

      <!-- Guardar resultado -->
      <form method="POST" action="{{ url_for('routes.guardar') }}">
        <input type="hidden" name="pasos" value="{{ pasos_txt }}">
        <button type="submit" class="btn btn-success mt-2">Guardar resultado</button>
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}
